
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" >
<!--<![endif]-->
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta property="og:description" content="Document Title" />
<meta property="og:image" content="" />
<meta property="og:site_name" content="" />
<meta property="og:type" content="" />
<meta property="og:title" content="Document Title" />
<meta property="og:type" content="website" />
<meta property="og:updated_time" content="" />
<meta property="og:url" content="" />
<title>Documentation</title>
<link rel="shortcut icon" href="static/img/favicon.ico"/>
<link rel="stylesheet" href="static/css/theme.css" type="text/css" />
<link rel="stylesheet" href="static/css/jquery-ui.min.css" type="text/css" />
<script src="static/js/modernizr.min.js"></script>
</head>
<body class="wy-body-for-nav">

<div class="wy-grid-for-nav">
<nav data-toggle="wy-nav-shift" class="wy-nav-side">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<ul class="sidebartop">
<li class="nolink search"><div role="search">
<form id="rtd-search-form" class="wy-form" action="searchResults.html" method="get">
<input type="text" name="q" placeholder="Search this document" aria-label="Search this project" id="searchinput" />
<input type="hidden" name="check_keywords" value="yes" />
<input type="hidden" name="area" value="default" />
</form>
</div>
</li></ul>
</div>
<div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">

<ul class="current">
<li class="nav-caption"><span class="caption-text">Getting Started</span></li><li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a>
<ul><li class="toctree-l2"><a class="reference internal" href="quickstart.html#requirements">Requirements</a>
</li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#prerequisites">Prerequisites</a>
</li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#step-1-download-the-agent-kernel">Step 1. Download the Agent Kernel</a>
</li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#step-2-install-the-agent">Step 2. Install the Agent</a>
<ul><li class="toctree-l3"><a class="reference internal" href="quickstart.html#debian-installation">Debian Installation</a>
</li><li class="toctree-l3"><a class="reference internal" href="quickstart.html#standalone-binary-installation">Standalone Binary Installation</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#step-3-verify-successful-installation">Step 3. Verify Successful Installation</a>
</li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#notes-on-batch-installation">Notes on Batch Installation</a>
</li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#next-steps">Next Steps</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="kernelIntegration.html">Kernel Integration</a>
<ul><li class="toctree-l2"><a class="reference internal" href="kernelIntegration.html#configuration-file">Configuration File</a>
</li><li class="toctree-l2"><a class="reference internal" href="kernelIntegration.html#interrupt-vector-table">Interrupt Vector Table</a>
</li><li class="toctree-l2"><a class="reference internal" href="kernelIntegration.html#language-considerations">Language Considerations</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="hwIntegration.html">Hardware Interface</a>
<ul><li class="toctree-l2"><a class="reference internal" href="hwIntegration.html#internal-ram">Internal RAM</a>
</li><li class="toctree-l2"><a class="reference internal" href="hwIntegration.html#internal-registers">Internal Registers</a>
</li><li class="toctree-l2"><a class="reference internal" href="hwIntegration.html#interrupt-vectors">Interrupt Vectors</a>
</li><li class="toctree-l2"><a class="reference internal" href="hwIntegration.html#operating-mode">Operating Mode</a>
</li><li class="toctree-l2"><a class="reference internal" href="hwIntegration.html#banking">Banking</a>
</li></ul></li><li class="nav-caption"><span class="caption-text">Overview</span></li><li class="toctree-l1"><a class="reference internal" href="rtSystems.html">Real-time Systems and Autonomous Agents</a>
<ul><li class="toctree-l2"><a class="reference internal" href="rtSystems.html#kernel-features">Kernel Features</a>
</li><li class="toctree-l2"><a class="reference internal" href="rtSystems.html#the-kernel-model">The Kernel Model</a>
</li><li class="toctree-l2"><a class="reference internal" href="rtSystems.html#autonomous-agents">Autonomous Agents</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a>
<ul><li class="toctree-l2"><a class="reference internal" href="concepts.html#the-task-unit">The Task Unit</a>
</li><li class="toctree-l2"><a class="reference internal" href="concepts.html#the-task-and-its-environment">The Task and Its Environment</a>
<ul><li class="toctree-l3"><a class="reference internal" href="concepts.html#task-discipline">TASK DISCIPLINE</a>
</li><li class="toctree-l3"><a class="reference internal" href="concepts.html#task-attributes">TASK ATTRIBUTES</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="concepts.html#task-identification-and-creation">Task Identification and Creation</a>
<ul><li class="toctree-l3"><a class="reference internal" href="concepts.html#identification">IDENTIFICATION</a>
</li><li class="toctree-l3"><a class="reference internal" href="concepts.html#creation">CREATION</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="concepts.html#kernel-states">Kernel States</a>
<ul><li class="toctree-l3"><a class="reference internal" href="concepts.html#state-descriptions">State Descriptions</a>
</li><li class="toctree-l3"><a class="reference internal" href="concepts.html#scheduling-policy">Scheduling Policy</a>
</li><li class="toctree-l3"><a class="reference internal" href="concepts.html#initialization-and-startup">Initialization and Startup</a>
</li><li class="toctree-l3"><a class="reference internal" href="concepts.html#handling-interrupts">Handling Interrupts</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="concepts.html#kernel-primitives">Kernel Primitives</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="sysReliability.html">System Reliability</a>
<ul><li class="toctree-l2"><a class="reference internal" href="sysReliability.html#reliability-issues">Reliability Issues</a>
</li><li class="toctree-l2"><a class="reference internal" href="sysReliability.html#reliability-by-design">Reliability by Design</a>
</li><li class="toctree-l2"><a class="reference internal" href="sysReliability.html#fault-management">Fault Management</a>
<ul><li class="toctree-l3"><a class="reference internal" href="sysReliability.html#fault-detection">FAULT DETECTION</a>
<ul><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#memory-audits">Memory Audits</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#guarded-primitive-access">Guarded Primitive Access</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#software-watchdog">Software Watchdog</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#primitive-declaration">Primitive Declaration</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#system-build-utility">System Build Utility</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#high-level-language-interface">High-Level Language Interface</a>
</li></ul></li><li class="toctree-l3"><a class="reference internal" href="sysReliability.html#fault-handling-and-recovery">FAULT HANDLING AND RECOVERY</a>
<ul><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#kernel-fault-handling">Kernel Fault Handling</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#application-fault-handling">Application Fault Handling</a>
</li></ul></li></ul></li></ul></li><li class="nav-caption"><span class="caption-text">Tutorials</span></li><li class="toctree-l1"><a class="reference internal" href="tutFirst.html">Your First Application</a>
<ul><li class="toctree-l2"><a class="reference internal" href="tutFirst.html#step-1-set-up-your-demoyard-developer-environment">Step 1. Set up Your Demoyard Developer Environment</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutFirst.html#step-2-define-your-datastream">Step 2. Define Your Datastream</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutFirst.html#step-3-visualize-your-data">Step 3. Visualize Your Data</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutFirst.html#summary">Summary</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="tutCustom.html">Create a Custom Application</a>
<ul><li class="toctree-l2"><a class="reference internal" href="tutCustom.html#step-1-create-your-custom-application">Step 1. Create Your Custom Application</a>
<ul><li class="toctree-l3"><a class="reference internal" href="tutCustom.html#create-a-datapoint">Create a Datapoint</a>
</li><li class="toctree-l3"><a class="reference internal" href="tutCustom.html#write-the-datapoints">Write the Datapoints</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="tutCustom.html#step-2-run-the-example-and-visualize-your-data">Step 2. Run the Example and Visualize Your Data</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutCustom.html#summary">Summary</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutCustom.html#example-source">Example Source</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="tutRequest.html">Make an API Call to the Demoyard Cloud</a>
<ul><li class="toctree-l2"><a class="reference internal" href="tutRequest.html#authenticate-the-agent-with-the-cloud">Authenticate the Agent with the Cloud</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutRequest.html#get-a-list-of-users-associated-with-the-agent">Get a List of Users Associated with the Agent</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutRequest.html#example">Example</a>
</li></ul></li><li class="nav-caption"><span class="caption-text">API Reference</span></li><li class="toctree-l1"><a class="reference internal" href="conventions.html">General Definitions</a>
<ul><li class="toctree-l2"><a class="reference internal" href="conventions.html#suspensive-primitives">Suspensive Primitives</a>
</li><li class="toctree-l2"><a class="reference internal" href="conventions.html#common-primitive-attributes">Common Primitive Attributes</a>
</li><li class="toctree-l2"><a class="reference internal" href="conventions.html#primitive-access">Primitive Access</a>
</li><li class="toctree-l2"><a class="reference internal" href="conventions.html#literals-used-with-primitives">Literals Used with Primitives</a>
<ul><li class="toctree-l3"><a class="reference internal" href="conventions.html#task-attributes">Task Attributes</a>
</li><li class="toctree-l3"><a class="reference internal" href="conventions.html#queue-management">Queue Management</a>
</li><li class="toctree-l3"><a class="reference internal" href="conventions.html#semaphore-management">Semaphore Management</a>
</li><li class="toctree-l3"><a class="reference internal" href="conventions.html#event-management">Event Management</a>
</li><li class="toctree-l3"><a class="reference internal" href="conventions.html#timer-management">Timer Management</a>
</li><li class="toctree-l3"><a class="reference internal" href="conventions.html#fault-management">Fault Management</a>
</li></ul></li></ul></li><li class="toctree-l1"><a class="reference internal" href="ifSpecification.html">Interface Specification</a>
<ul><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#gettid-get-task-identifier">GETTID Get Task Identifier</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#getmytid-get-own-task-identifier">GETMYTID Get Own Task Identifier</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#get-crid-get-resource-identifier">GET_CRID Get Resource Identifier</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#enter-cr-get-access-to-resource">ENTER_CR Get Access to Resource</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#exit-cr-release-access-to-resource">EXIT_CR Release Access to Resource</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#enter-scr-get-exclusive-access-to-processor">ENTER_SCR Get Exclusive Access to Processor</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#signal-signal-event-occurrence">SIGNAL Signal Event Occurrence</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#wait-wait-for-event-occurrence">WAIT Wait for Event Occurrence</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#send-send-message-to-task">SEND Send Message to Task</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#recv-wait-for-message-from-task">RECV Wait for Message from Task</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#alert-request-wakeup-after-time-interval">ALERT Request Wakeup after Time Interval</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#gettik-get-current-system-timer-value">GETTIK Get Current System Timer Value</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#q-getid-get-queue-identifier">Q_GETID Get Queue Identifier</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#q-clear-initialize-queue">Q_CLEAR Initialize Queue</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#q-put-add-item-to-linked-list-queue">Q_PUT Add Item to Linked-list Queue</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#locate-mem-locate-task-dynamic-memory">LOCATE_MEM Locate Task Dynamic Memory</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#log-fatal-indicate-fatal-fault-occurrence">LOG_FATAL Indicate Fatal Fault Occurrence</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#log-warn-indicate-non-fatal-fault-occurrence">LOG_WARN Indicate Non-fatal Fault Occurrence</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#exit-sstate-exit-supervisory-state">EXIT_SSTATE Exit Supervisory State</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="dataStructures.html">Data Structures</a>
<ul><li class="toctree-l2"><a class="reference internal" href="dataStructures.html#control-data">Control Data</a>
</li><li class="toctree-l2"><a class="reference internal" href="dataStructures.html#task-control-block">Task Control Block</a>
</li><li class="toctree-l2"><a class="reference internal" href="dataStructures.html#fault-analysis-area">Fault Analysis Area</a>
</li></ul></li><li class="nav-caption"><span class="caption-text">Performance</span></li><li class="toctree-l1"><a class="reference internal" href="perfMemory.html">Memory Allocation</a>
<ul><li class="toctree-l2"><a class="reference internal" href="perfMemory.html#memory-layout">Memory Layout</a>
<ul><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#internal-256-byte-ram">INTERNAL 256-BYTE RAM</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#64-byte-register-block">64-BYTE REGISTER BLOCK</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#application-dynamic-data-area">APPLICATION DYNAMIC DATA AREA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#task-dynamic-data-area">TASK DYNAMIC DATA AREA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#task-stack-area">TASK STACK AREA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#kernel-task-management-data">KERNEL TASK MANAGEMENT DATA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#supervisor-state-stack">SUPERVISOR STATE STACK</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#memory-mapped-i/o-registers">MEMORY-MAPPED I/O REGISTERS</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#kernel-code-and-constant-data">KERNEL CODE AND CONSTANT DATA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#application-code-and-constant-data">APPLICATION CODE AND CONSTANT DATA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#internal-512-byte-eeprom">INTERNAL 512-BYTE EEPROM</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#internal-8k-rom">INTERNAL 8K ROM</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#interrupt-vectors">INTERRUPT VECTORS</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="perfMemory.html#task-memory-allocation">Task Memory Allocation</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="perfCPU.html">CPU Performance</a>
<ul><li class="toctree-l2"><a class="reference internal" href="perfCPU.html#context-switch-timing">Context Switch Timing</a>
</li><li class="toctree-l2"><a class="reference internal" href="perfCPU.html#primitive-timing">Primitive Timing</a>
</li></ul></li><li class="nav-caption"><span class="caption-text">Configuration Dashboard</span></li><li class="toctree-l1"><a class="reference internal" href="dashOverview.html">Dashboard Introduction</a>
<ul><li class="toctree-l2"><a class="reference internal" href="dashOverview.html#purpose-of-the-utility">Purpose of the Utility</a>
</li><li class="toctree-l2"><a class="reference internal" href="dashOverview.html#assembling-and-modifying-the-output-file">Assembling and Modifying the Output File</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="dashUG.html">Dashboard User Guide</a>
<ul><li class="toctree-l2"><a class="reference internal" href="dashUG.html#file-location">File Location</a>
</li><li class="toctree-l2"><a class="reference internal" href="dashUG.html#resource-and-environment-definition">Resource and Environment Definition</a>
</li><li class="toctree-l2"><a class="reference internal" href="dashUG.html#task-definition">Task Definition</a>
</li></ul></li>
</ul>
</div>
</div>
</nav>

<section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
<div class="wy-nav-content">
<div class="rst-content">
<a href="index.html">Home</a>
<a href="sysReliability.html" class="stealth-btn float-right" title="Accesskey Alt(+Shift)+n">Next</a><span class="bar  float-right">|</span><a href="rtSystems.html" class="stealth-btn float-right" title="Accesskey Alt(+Shift)+p">Previous</a>
<div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
<div itemprop="articleBody" class="toBeIndexed">
<div class="document">
<div class="section" id="concepts">
<h1>Concepts</h1>
<div class="section" id="the-task-unit">
<h2>The Task Unit</h2>
<p>This section discusses the concept and implementation of a task.  It gives an introduction to the terminology associated with a task and discusses the kernel abstraction supported by the task.</p>
<p>In implementation terms, a task is a run-time instance of the source code.  an example of a kernel task is shown below.  The program gains control of the processor, executes application-specific logic, and explicitly releases control.  A task uses coordination primitives to get and release processing time.</p>
<pre class="code c literal-block">
<span class="name">INT</span> <span class="name function">task_x</span> <span class="punctuation">()</span>
<span class="punctuation">{</span>
    <span class="comment multiline">/*** variable declarations ***/</span>
    <span class="name">INT</span> <span class="name">status</span><span class="punctuation">,</span> <span class="name">msgid</span><span class="punctuation">,</span> <span class="name">msgsiz</span><span class="punctuation">;</span>
    <span class="name">CHAR</span> <span class="operator">*</span><span class="name">msg_p</span><span class="punctuation">;</span>
    <span class="comment multiline">/***  task initialization  ***/</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="name">task_x_init</span> <span class="punctuation">()</span> <span class="operator">==</span> <span class="name">SUCCESS</span><span class="punctuation">)</span>
    <span class="punctuation">{</span>
        <span class="comment multiline">/***  task definition ***/</span>
        <span class="name">DO_FOREVER</span>
        <span class="punctuation">{</span>
            <span class="comment multiline">/*** suspensive primitive ***/</span>
            <span class="name">status</span> <span class="operator">=</span> <span class="name">RECV</span> <span class="punctuation">(</span><span class="operator">&amp;</span><span class="name">msgid</span><span class="punctuation">,</span> <span class="operator">&amp;</span><span class="name">msg_p</span><span class="punctuation">,</span>
                        <span class="operator">&amp;</span><span class="name">msgsiz</span><span class="punctuation">,</span> <span class="name">SEC_1</span><span class="punctuation">);</span>
            <span class="keyword">switch</span> <span class="punctuation">(</span><span class="name">status</span><span class="punctuation">)</span>
            <span class="punctuation">{</span>
                <span class="keyword">case</span> <span class="name label">SUCCESS</span><span class="punctuation">:</span>  <span class="comment multiline">/* msg ready */</span>
                    <span class="name">process_msg</span> <span class="punctuation">(</span><span class="name">msgid</span><span class="punctuation">,</span>
                        <span class="name">msgsiz</span><span class="punctuation">,</span> <span class="name">msg_p</span><span class="punctuation">);</span>
                    <span class="keyword">break</span><span class="punctuation">;</span>
                <span class="keyword">case</span> <span class="name label">TIMEOUT</span><span class="punctuation">:</span>  <span class="comment multiline">/* no msg    */</span>
                    <span class="name">handle_timeout</span> <span class="punctuation">();</span>
                    <span class="keyword">break</span><span class="punctuation">;</span>
                <span class="keyword">case</span> <span class="name label">FAILURE</span><span class="punctuation">:</span>  <span class="comment multiline">/* fault     */</span>
                <span class="keyword">default</span><span class="operator">:</span>
                    <span class="name">LOG_WARN</span> <span class="punctuation">(</span><span class="name">LY_0</span> <span class="operator">+</span> <span class="name">SS_0</span> <span class="operator">+</span>
                        <span class="name">LV_U</span> <span class="operator">+</span> <span class="name">P0</span> <span class="operator">+</span>  <span class="literal number integer">0</span><span class="punctuation">,</span>
                             <span class="name">NOT_USED</span><span class="punctuation">);</span>
                    <span class="keyword">break</span><span class="punctuation">;</span>
            <span class="punctuation">}</span>  <span class="comment multiline">/* end switch */</span>
        <span class="punctuation">}</span>  <span class="comment multiline">/* end forever */</span>
    <span class="punctuation">}</span>
    <span class="comment multiline">/***  unrecoverable fault  ***/</span>
    <span class="name">LOG_FATAL</span> <span class="punctuation">(</span><span class="name">LY_0</span> <span class="operator">+</span> <span class="name">SS_0</span> <span class="operator">+</span> <span class="name">LV_U</span> <span class="operator">+</span> <span class="name">P0</span> <span class="operator">+</span> <span class="literal number integer">0</span><span class="punctuation">,</span> <span class="name">NOT_USED</span><span class="punctuation">);</span>
<span class="punctuation">}</span>
</pre>
</div>
<div class="section" id="the-task-and-its-environment">
<h2>The Task and Its Environment</h2>
<div class="section" id="task-discipline">
<h3>TASK DISCIPLINE</h3>
<p>To design a system, where the work unit is a task, the task discipline imposed by the kernel must be understood. The main difference between operating systems is the task discipline.</p>
<p>In the kernel, once a task gains control of the processor, it runs to completion.  That is, a task retains control until it explicitly releases control by calling a suspending primitive.  This discipline supports tasks that run quickly and is consistent with the requirements of hard-deadline, real-time systems.  The kernel is suited to those systems where only a small amount of time is needed to completely handle an event.  Naturally, the granularity of an event becomes a design issue.</p>
<p>Care should be taken to only use kernel facilities to affect a task's behavior.  For example, by using timing primitives to delay a task, instead of instructions that cause a task to busy-wait, other tasks are allowed to run while the task is waiting.  Kernel fault management guards against tasks that do not release control of the processor.</p>
<p>Although a task is not normally preempted by the kernel or another task, a task may be preempted by a hardware interrupt.  This is transparent to the task, however, and processing always resumes with the interrupted task.</p>
</div>
<div class="section" id="task-attributes">
<h3>TASK ATTRIBUTES</h3>
<p>Task capabilities and constraints can be modified for each task, individually, by changing a task's attributes.</p>
<p>PRIORITY</p>
<p>Each task may be assigned a priority level in relation to other tasks.  Tasks that have work pending and are ready to run are given processor control according to their priority.</p>
<p>There are three priority levels.  The first task ready at the
highest priority level is the next task to run.</p>
<p>INSTANCE</p>
<p>The kernel supports the concept of multiple-instance tasks.  A task instance is a task that is &quot;known&quot; by the kernel at run-time.  Usually, each instance is derived from a separate block of source code.  With multiple instance tasks, however, more than one run-time instance may be from the same source code.  This is useful for tasks that perform the same function on different entities, such as a task for each I/O channel or network link.  Rather than have a single task maintain separate data for each entity, each task manages one set of data.  These types of tasks are also more efficient because they do not need to continually map an entity to its data or function.</p>
<p>Care must be taken, however, in coding multiple instance
tasks.  Such tasks cannot declare and reference C-language
type static data because each run-time instance
references these same data.  Dynamic data must be allocated
by each task to get its own data space, usually at
initialization time.</p>
<p>MEMORY AREA</p>
<p>Each task has its own stack and dynamic memory areas.</p>
<p>The stack area is required.  Any stack size may be defined,
depending on expected stack usage.  The stack is used by all
subroutines called from the task, primitive calls, and
interrupts that occur while in the TASK_STATE.</p>
<p>Dynamic memory allocation is optional.  If a task allocates
dynamic memory, there are no restrictions on its use.</p>
<p>Kernel fault management continually audits stack and
dynamic memory to detect corruption.  Corrupted memory
causes the task to be deleted.  While this may limit fault
propagation and increase system availability, depending on
the importance of the deleted task, it is likely that
neighboring task memory is also corrupted.
RESIDENT BANK The kernel supports hardware memory bank switching to extend the 64-kilobyte address limitation.  Bank switching only applies to code space memory, however.  If the code is located in ROM, then ROM bank switching is allowed and, if the code is located in RAM, then that part of RAM with code space may be switched.  Bank switching is not supported for RAM data memory because this memory maintains the system context used by the kernel.</p>
<p>The task unit is a natural unit of consideration for bank
switching.  This is because context switching already occurs
at the task level, so context switching to another bank is no
different than a normal kernel context switch.</p>
<p>When a task is ready to run, the kernel determines the bank
where the task resides, switches in the appropriate bank and
resumes running the task.</p>
<p>A task's resident bank is defined in the configuration file.
The entry point of the user-provided bank switching
procedure is also defined in the configuration file.</p>
<p>The usual cautions apply in writing the bank switching
procedure to be able to return to the original bank.  The
initialization stack area, in internal RAM, is available to
preserve information across a bank switch.  Additionally, the
kernel and any common routines must be located at the
same location in all banks.  Only the task code area and some
specialized routines may be bank-dependent.</p>
</div>
</div>
<div class="section" id="task-identification-and-creation">
<h2>Task Identification and Creation</h2>
<div class="section" id="identification">
<h3>IDENTIFICATION</h3>
<p>From a programming point of view, tasks are referenced by logical, symbolic names.  This makes the system more maintainable and extensible.  At initialization, a physical task name is assigned to each task, which is only used, directly, by the kernel.  Applications never need to use the physical name, except as a primitive parameter, and then only to make the kernel more efficient.  The physical name may be obtained with the GETTID and GETMYTID primitives.  This is usually done at task initialization because logical and physical task names never change.</p>
</div>
<div class="section" id="creation">
<h3>CREATION</h3>
<p>Tasks are created by the kernel at initialization from configuration file information.  This information defines each task and its attributes, which the kernel uses to allocate task resources.</p>
<p>Once created, a task is usually never deleted.  Two exceptions are 1) upon a system reset, and 2) when the kernel detected a critical fault while in the TASK state.</p>
</div>
</div>
<div class="section" id="kernel-states">
<h2>Kernel States</h2>
<p>This section describes the states of the kernel, for overall resource management, and the states of a task, for task resource management.</p>
<div class="section" id="state-descriptions">
<h3>State Descriptions</h3>
<p>The kernel may be in any of four states, depending on the work to be done.  State is used primarily to determine how memory resources are to be allocated.</p>
<p>Immediately following a hardware or software reset, the kernel takes control of the processor.  This is the INITIALIZATION state.  In this state, the only application programs that run are the hardware and software routines defined in the system configuration file.</p>
<p>If there is work for a task and the task assigned to the work is available, the kernel enters the TASK state.  The intricacies of task-level processing are described in more detail below.</p>
<p>In the SUPERVISORY state, resources are allocated from the systems resources, rather from task resources.  This state may be entered when a hardware interrupt occurs during the TASK state.</p>
<p>Finally, when there is no task work and no interrupt pending, the kernel enters the MONITOR state and uses system resources.</p>
<p>In the TASK and SUPERVISORY states, the watchdog (COP) monitors execution time.  If the task execution time exceeds the watchdog period, the task is removed from the system and normal processing continues.  The task is never scheduled to run again.  If the execution time exceeds the watchdog period in the SUPERVISORY state, which occurs in an interrupt service routine, a system restart is initiated.  The default watchdog period is 1.049 seconds and is set in the microcontroller's OPTION register.</p>
<p>TASK STATES</p>
<p>All tasks are put in a READY state at initialization.    The first task in the task configuration table is the first task to run.  Each task runs or initializes its local data areas until it calls a suspending primitive.</p>
<p>Task states change from READY to ACTIVE when work becomes available for the task.  Real-time processing occurs when tasks are allocated processor time to perform work.</p>
<p>In the TASK state, with a task ACTIVE, the stack area is allocated from the task's local memory.  A task runs until it calls a suspending primitive and there is no work to do or a higher priority task has work to do.  When suspended, the task is in a WAIT state, waiting for a semaphore, event, message, or timer primitive.  When a task resumes execution, processing begins at the point where the task was suspended, not necessarily at the task's entry point.</p>
<p>In addition to READY, ACTIVE and WAIT states, a task may be in the DORMANT state.  This occurs if a fault was detected by the kernel during the task's ACTIVE state.  Once in the DORMANT state, the task cannot run again until the system is restarted; this prevents fault propagation.</p>
<p>NON-TASK STATES</p>
<p>The SUPERVISORY state is entered by a specific request to use common system resources.  See the discussion below on handling interrupts, for more detailed information.</p>
<p>When there is no task work or interrupt pending, the kernel enters the MONITOR state.  This switches the active stack to the system memory area, to be ready for an interrupt, and executes a STOP instruction.  Processing resumes with the next interrupt; an interrupt always occurs under normal operating conditions with the Real-Time Interrupt (RTII).  To eventually return to the TASK state, an interrupt service routine must call a primitive that completes a task's wait condition.</p>
</div>
<div class="section" id="scheduling-policy">
<h3>Scheduling Policy</h3>
<p>Tasks are prioritized in the system configuration table when the system is built.  A task's priority never changes once the system is built, which assumes processing requirements are understood before run-time.  With fixed task priorities, response times are predictable.</p>
<p>The next task to run is determined, whenever a task releases control of the processor, by calling a suspending primitive.  At that time, the highest priority task in the READY state is run.  When multiple equal priority tasks are ready to run, the task that first became ready is the first to run.</p>
<p>Tasks may be preempted by interrupts and the interrupt service routine may call a primitive that causes a waiting task to become READY.  Processing always resumes with the interrupt task.</p>
</div>
<div class="section" id="initialization-and-startup">
<h3>Initialization and Startup</h3>
<p>The kernel does the basic hardware and software initialization needed to run the kernel in the target processor environment.  It then automatically invokes initialization routines, provided by the developer, to initialize application-specific hardware and software.</p>
<p>The application-specific routines are the only initialization routines that need to be provided.  Their entry points are specified in the configuration file when the system is built.</p>
<p>Also, configurable microcontroller parameters that need to be set at initialization are defined in the configuration file.</p>
<p>The kernel provides orderly initialization sequencing by initializing from lower to higher levels of abstraction.  First, the hardware, then kernel, then application hardware and software are initialized; the idea is the hardware must be available for the kernel to run, and the hardware and kernel must be available for the application to run.</p>
<p>Entries in the configuration file provide hooks for the kernel to initialize application hardware and software.  The kernel initializes application hardware before software.</p>
<p>At each step, the integrity of the supporting layer is confirmed before the next layer is initialized.  If resources are not available for a layer to provide the necessary services, subsequent layers are not initialized.</p>
<p>Faults that occur before kernel resource allocation and initialization are complete are considered critical because the integrity of the system cannot be guaranteed.  If a critical fault is detected, a STOP instruction is executed to prevent fault propagation.</p>
</div>
<div class="section" id="handling-interrupts">
<h3>Handling Interrupts</h3>
<p>Conceptually, interrupt service routines are very similar to tasks in that they run as a result of an external stimulus that changes the context of the system.  In the case of tasks, the stimuli may be messages, events, or semaphores, while in the case of an interrupt service routine, the stimulus is a hardware event detected by the microcontroller.</p>
<p>Task-related context switches that change resource allocation needs are managed by the kernel.  However, there is no kernel to manage hardware-initiated context switches in the same way.  Interrupt service routines must, therefore, explicitly, interface with the tasks' kernel to coordinate resource allocation.  A SUPERVISORY state is implemented in the kernel for interrupt management.</p>
<p>SUPERVISORY state is entered by calling the primitive, ENTER_SSTATE.  In SUPERVISORY state, the interrupt uses the stack area from the system's memory area.  Upon exiting from the interrupt, by calling EXIT_SSTATE, the interrupted task resumes at the point of interruption, again, using the task's memory area stack.</p>
<p>The kernel supports nested interrupts.  That is, an interrupt may occur, and call ENTER_SSTATE, while another interrupt service routine is in progress.  Control does not return to the task until EXIT_SSTATE is called by the last interrupt service routine.</p>
<p>Tasks may become READY to run as a result of a primitive called by the interrupt service routine, which completes a task's WAITING primitive.</p>
</div>
</div>
<div class="section" id="kernel-primitives">
<h2>Kernel Primitives</h2>
<p>This section discusses the concepts associated with primitives.  A detailed description of each kernel primitive is found in Part 3.</p>
<p>kernel functions are called primitives because they are the most basic function for interacting with tasks and requesting kernel services.</p>
<p>Primitives are called during task or interrupt service routine execution.  While primitive code and static data are in the kernel code and data space, primitives use the calling task or interrupt service routine stack area.</p>
</div>
</div>
</div>

</div><!-- /.toBeIndexed -->
</div>
<footer>
<div class="rst-footer-nav" role="navigation" aria-label="footer navigation">

<a href="rtSystems.html" title="Accesskey Alt(+Shift)+p" accesskey="p">Previous</a><span class="bar">|</span><a href="sysReliability.html" title="Accesskey Alt(+Shift)+n" accesskey="n">Next</a>
</div></footer>
</div>
</div>
</section>
</div>


<script type="text/javascript">
var DOCUMENTATION_OPTIONS = {
URL_ROOT:'./',
VERSION:'',
COLLAPSE_INDEX:false,
FILE_SUFFIX:'.html',
HAS_SOURCE:  true
};
</script>
<script type="text/javascript" src="static/js/jquery.min.js"></script>
<script type="text/javascript" src="static/js/underscore.js"></script>
<script type="text/javascript" src="static/js/doctools.js"></script>
<script type="text/javascript" src="static/js/language_data.js"></script>
<script type="text/javascript" src="static/js/searchtools.js"></script>
<script type="text/javascript" src="static/js/jquery-ui.min.js"></script>
<script type="text/javascript" src="static/js/theme.js"></script>
<script type="text/javascript">
jQuery(function () {
SphinxRtdTheme.StickyNav.enable();
});
</script>
<script type="text/javascript" id="idPiwikScriptPlaceholder"></script>
<header>
<div class="header__container">
<a href="index.html"><img class="raw_img" height="64" src="img/bannerLogo.png" alt="Documentation" /></a>

<ul class="header__links"><li><a href="https://github.community/">Community</a></li><li><a href="https://github.com/ghartsel/DoreStaticSiteGenerator/tree/master/demo">GitHub</a></li><li><a href="https://www.gh.works/">About</a></li></ul>
</div>
</header>
</body>
</html>
