
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" >
<!--<![endif]-->
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta property="og:description" content="Document Title" />
<meta property="og:image" content="" />
<meta property="og:site_name" content="" />
<meta property="og:type" content="" />
<meta property="og:title" content="Document Title" />
<meta property="og:type" content="website" />
<meta property="og:updated_time" content="" />
<meta property="og:url" content="" />
<title>Documentation</title>
<link rel="shortcut icon" href="static/img/favicon.ico"/>
<link rel="stylesheet" href="static/css/theme.css" type="text/css" />
<link rel="stylesheet" href="static/css/jquery-ui.min.css" type="text/css" />
<script src="static/js/modernizr.min.js"></script>
</head>
<body class="wy-body-for-nav">

<div class="wy-grid-for-nav">
<nav data-toggle="wy-nav-shift" class="wy-nav-side">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<ul class="sidebartop">
<li class="nolink search"><div role="search">
<form id="rtd-search-form" class="wy-form" action="searchResults.html" method="get">
<input type="text" name="q" placeholder="Search this document" aria-label="Search this project" id="searchinput" />
<input type="hidden" name="check_keywords" value="yes" />
<input type="hidden" name="area" value="default" />
</form>
</div>
</li></ul>
</div>
<div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
<p class="caption"><span class="caption-text">Getting Started</span></p><ul class="current"><li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a>
<ul><li class="toctree-l2"><a class="reference internal" href="quickstart.html#requirements">Requirements</a>
</li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#prerequisites">Prerequisites</a>
</li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#step-1-download-the-agent-kernel">Step 1. Download the Agent Kernel</a>
</li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#step-2-install-the-agent">Step 2. Install the Agent</a>
<ul><li class="toctree-l3"><a class="reference internal" href="quickstart.html#debian-installation">Debian Installation</a>
</li><li class="toctree-l3"><a class="reference internal" href="quickstart.html#standalone-binary-installation">Standalone Binary Installation</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#step-3-verify-successful-installation">Step 3. Verify Successful Installation</a>
</li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#notes-on-batch-installation">Notes on Batch Installation</a>
</li><li class="toctree-l2"><a class="reference internal" href="quickstart.html#next-steps">Next Steps</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="kernelIntegration.html">Kernel Integration</a>
<ul><li class="toctree-l2"><a class="reference internal" href="kernelIntegration.html#configuration-file">Configuration File</a>
</li><li class="toctree-l2"><a class="reference internal" href="kernelIntegration.html#interrupt-vector-table">Interrupt Vector Table</a>
</li><li class="toctree-l2"><a class="reference internal" href="kernelIntegration.html#language-considerations">Language Considerations</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="hwIntegration.html">Hardware Interface</a>
<ul><li class="toctree-l2"><a class="reference internal" href="hwIntegration.html#internal-ram">Internal RAM</a>
</li><li class="toctree-l2"><a class="reference internal" href="hwIntegration.html#internal-registers">Internal Registers</a>
</li><li class="toctree-l2"><a class="reference internal" href="hwIntegration.html#interrupt-vectors">Interrupt Vectors</a>
</li><li class="toctree-l2"><a class="reference internal" href="hwIntegration.html#operating-mode">Operating Mode</a>
</li><li class="toctree-l2"><a class="reference internal" href="hwIntegration.html#banking">Banking</a>
</li></ul></li></ul><p class="caption"><span class="caption-text">Overview</span></p><ul class="current"><li class="toctree-l1"><a class="reference internal" href="rtSystems.html">Real-time Systems and Autonomous Agents</a>
<ul><li class="toctree-l2"><a class="reference internal" href="rtSystems.html#kernel-features">Kernel Features</a>
</li><li class="toctree-l2"><a class="reference internal" href="rtSystems.html#the-kernel-model">The Kernel Model</a>
</li><li class="toctree-l2"><a class="reference internal" href="rtSystems.html#autonomous-agents">Autonomous Agents</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a>
<ul><li class="toctree-l2"><a class="reference internal" href="concepts.html#the-task-unit">The Task Unit</a>
</li><li class="toctree-l2"><a class="reference internal" href="concepts.html#the-task-and-its-environment">The Task and Its Environment</a>
<ul><li class="toctree-l3"><a class="reference internal" href="concepts.html#task-discipline">TASK DISCIPLINE</a>
</li><li class="toctree-l3"><a class="reference internal" href="concepts.html#task-attributes">TASK ATTRIBUTES</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="concepts.html#task-identification-and-creation">Task Identification and Creation</a>
<ul><li class="toctree-l3"><a class="reference internal" href="concepts.html#identification">IDENTIFICATION</a>
</li><li class="toctree-l3"><a class="reference internal" href="concepts.html#creation">CREATION</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="concepts.html#kernel-states">Kernel States</a>
<ul><li class="toctree-l3"><a class="reference internal" href="concepts.html#state-descriptions">State Descriptions</a>
</li><li class="toctree-l3"><a class="reference internal" href="concepts.html#scheduling-policy">Scheduling Policy</a>
</li><li class="toctree-l3"><a class="reference internal" href="concepts.html#initialization-and-startup">Initialization and Startup</a>
</li><li class="toctree-l3"><a class="reference internal" href="concepts.html#handling-interrupts">Handling Interrupts</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="concepts.html#kernel-primitives">Kernel Primitives</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="sysReliability.html">System Reliability</a>
<ul><li class="toctree-l2"><a class="reference internal" href="sysReliability.html#reliability-issues">Reliability Issues</a>
</li><li class="toctree-l2"><a class="reference internal" href="sysReliability.html#reliability-by-design">Reliability by Design</a>
</li><li class="toctree-l2"><a class="reference internal" href="sysReliability.html#fault-management">Fault Management</a>
<ul><li class="toctree-l3"><a class="reference internal" href="sysReliability.html#fault-detection">FAULT DETECTION</a>
<ul><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#memory-audits">Memory Audits</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#guarded-primitive-access">Guarded Primitive Access</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#software-watchdog">Software Watchdog</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#primitive-declaration">Primitive Declaration</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#system-build-utility">System Build Utility</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#high-level-language-interface">High-Level Language Interface</a>
</li></ul></li><li class="toctree-l3"><a class="reference internal" href="sysReliability.html#fault-handling-and-recovery">FAULT HANDLING AND RECOVERY</a>
<ul><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#kernel-fault-handling">Kernel Fault Handling</a>
</li><li class="toctree-l4"><a class="reference internal" href="sysReliability.html#application-fault-handling">Application Fault Handling</a>
</li></ul></li></ul></li></ul></li></ul><p class="caption"><span class="caption-text">Tutorials</span></p><ul class="current"><li class="toctree-l1"><a class="reference internal" href="tutFirst.html">Your First Application</a>
<ul><li class="toctree-l2"><a class="reference internal" href="tutFirst.html#step-1-set-up-your-demoyard-developer-environment">Step 1. Set up Your Demoyard Developer Environment</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutFirst.html#step-2-define-your-datastream">Step 2. Define Your Datastream</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutFirst.html#step-3-visualize-your-data">Step 3. Visualize Your Data</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutFirst.html#summary">Summary</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="tutCustom.html">Create a Custom Application</a>
<ul><li class="toctree-l2"><a class="reference internal" href="tutCustom.html#step-1-create-your-custom-application">Step 1. Create Your Custom Application</a>
<ul><li class="toctree-l3"><a class="reference internal" href="tutCustom.html#create-a-datapoint">Create a Datapoint</a>
</li><li class="toctree-l3"><a class="reference internal" href="tutCustom.html#write-the-datapoints">Write the Datapoints</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="tutCustom.html#step-2-run-the-example-and-visualize-your-data">Step 2. Run the Example and Visualize Your Data</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutCustom.html#summary">Summary</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutCustom.html#example-source">Example Source</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="tutRequest.html">Make an API Call to the Demoyard Cloud</a>
<ul><li class="toctree-l2"><a class="reference internal" href="tutRequest.html#authenticate-the-agent-with-the-cloud">Authenticate the Agent with the Cloud</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutRequest.html#get-a-list-of-users-associated-with-the-agent">Get a List of Users Associated with the Agent</a>
</li><li class="toctree-l2"><a class="reference internal" href="tutRequest.html#example">Example</a>
</li></ul></li></ul><p class="caption"><span class="caption-text">API Reference</span></p><ul class="current"><li class="toctree-l1"><a class="reference internal" href="conventions.html">General Definitions</a>
<ul><li class="toctree-l2"><a class="reference internal" href="conventions.html#suspensive-primitives">Suspensive Primitives</a>
</li><li class="toctree-l2"><a class="reference internal" href="conventions.html#common-primitive-attributes">Common Primitive Attributes</a>
</li><li class="toctree-l2"><a class="reference internal" href="conventions.html#primitive-access">Primitive Access</a>
</li><li class="toctree-l2"><a class="reference internal" href="conventions.html#literals-used-with-primitives">Literals Used with Primitives</a>
<ul><li class="toctree-l3"><a class="reference internal" href="conventions.html#task-attributes">Task Attributes</a>
</li><li class="toctree-l3"><a class="reference internal" href="conventions.html#queue-management">Queue Management</a>
</li><li class="toctree-l3"><a class="reference internal" href="conventions.html#semaphore-management">Semaphore Management</a>
</li><li class="toctree-l3"><a class="reference internal" href="conventions.html#event-management">Event Management</a>
</li><li class="toctree-l3"><a class="reference internal" href="conventions.html#timer-management">Timer Management</a>
</li><li class="toctree-l3"><a class="reference internal" href="conventions.html#fault-management">Fault Management</a>
</li></ul></li></ul></li><li class="toctree-l1"><a class="reference internal" href="ifSpecification.html">Interface Specification</a>
<ul><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#gettid-get-task-identifier">GETTID Get Task Identifier</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#getmytid-get-own-task-identifier">GETMYTID Get Own Task Identifier</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#get-crid-get-resource-identifier">GET_CRID Get Resource Identifier</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#enter-cr-get-access-to-resource">ENTER_CR Get Access to Resource</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#exit-cr-release-access-to-resource">EXIT_CR Release Access to Resource</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#enter-scr-get-exclusive-access-to-processor">ENTER_SCR Get Exclusive Access to Processor</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#signal-signal-event-occurrence">SIGNAL Signal Event Occurrence</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#wait-wait-for-event-occurrence">WAIT Wait for Event Occurrence</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#send-send-message-to-task">SEND Send Message to Task</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#recv-wait-for-message-from-task">RECV Wait for Message from Task</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#alert-request-wakeup-after-time-interval">ALERT Request Wakeup after Time Interval</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#gettik-get-current-system-timer-value">GETTIK Get Current System Timer Value</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#q-getid-get-queue-identifier">Q_GETID Get Queue Identifier</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#q-clear-initialize-queue">Q_CLEAR Initialize Queue</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#q-put-add-item-to-linked-list-queue">Q_PUT Add Item to Linked-list Queue</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#locate-mem-locate-task-dynamic-memory">LOCATE_MEM Locate Task Dynamic Memory</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#log-fatal-indicate-fatal-fault-occurrence">LOG_FATAL Indicate Fatal Fault Occurrence</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#log-warn-indicate-non-fatal-fault-occurrence">LOG_WARN Indicate Non-fatal Fault Occurrence</a>
</li><li class="toctree-l2"><a class="reference internal" href="ifSpecification.html#exit-sstate-exit-supervisory-state">EXIT_SSTATE Exit Supervisory State</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="dataStructures.html">Data Structures</a>
<ul><li class="toctree-l2"><a class="reference internal" href="dataStructures.html#control-data">Control Data</a>
</li><li class="toctree-l2"><a class="reference internal" href="dataStructures.html#task-control-block">Task Control Block</a>
</li><li class="toctree-l2"><a class="reference internal" href="dataStructures.html#fault-analysis-area">Fault Analysis Area</a>
</li></ul></li></ul><p class="caption"><span class="caption-text">Performance</span></p><ul class="current"><li class="toctree-l1"><a class="reference internal" href="perfMemory.html">Memory Allocation</a>
<ul><li class="toctree-l2"><a class="reference internal" href="perfMemory.html#memory-layout">Memory Layout</a>
<ul><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#internal-256-byte-ram">INTERNAL 256-BYTE RAM</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#64-byte-register-block">64-BYTE REGISTER BLOCK</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#application-dynamic-data-area">APPLICATION DYNAMIC DATA AREA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#task-dynamic-data-area">TASK DYNAMIC DATA AREA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#task-stack-area">TASK STACK AREA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#kernel-task-management-data">KERNEL TASK MANAGEMENT DATA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#supervisor-state-stack">SUPERVISOR STATE STACK</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#memory-mapped-i/o-registers">MEMORY-MAPPED I/O REGISTERS</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#kernel-code-and-constant-data">KERNEL CODE AND CONSTANT DATA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#application-code-and-constant-data">APPLICATION CODE AND CONSTANT DATA</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#internal-512-byte-eeprom">INTERNAL 512-BYTE EEPROM</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#internal-8k-rom">INTERNAL 8K ROM</a>
</li><li class="toctree-l3"><a class="reference internal" href="perfMemory.html#interrupt-vectors">INTERRUPT VECTORS</a>
</li></ul></li><li class="toctree-l2"><a class="reference internal" href="perfMemory.html#task-memory-allocation">Task Memory Allocation</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="perfCPU.html">CPU Performance</a>
<ul><li class="toctree-l2"><a class="reference internal" href="perfCPU.html#context-switch-timing">Context Switch Timing</a>
</li><li class="toctree-l2"><a class="reference internal" href="perfCPU.html#primitive-timing">Primitive Timing</a>
</li></ul></li></ul><p class="caption"><span class="caption-text">Configuration Dashboard</span></p><ul class="current"><li class="toctree-l1"><a class="reference internal" href="dashOverview.html">Dashboard Introduction</a>
<ul><li class="toctree-l2"><a class="reference internal" href="dashOverview.html#purpose-of-the-utility">Purpose of the Utility</a>
</li><li class="toctree-l2"><a class="reference internal" href="dashOverview.html#assembling-and-modifying-the-output-file">Assembling and Modifying the Output File</a>
</li></ul></li><li class="toctree-l1"><a class="reference internal" href="dashUG.html">Dashboard User Guide</a>
<ul><li class="toctree-l2"><a class="reference internal" href="dashUG.html#file-location">File Location</a>
</li><li class="toctree-l2"><a class="reference internal" href="dashUG.html#resource-and-environment-definition">Resource and Environment Definition</a>
</li><li class="toctree-l2"><a class="reference internal" href="dashUG.html#task-definition">Task Definition</a>
</li></ul></li></ul>
</div>
</div>
</nav>

<section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
<div class="wy-nav-content">
<div class="rst-content">
<a href="index.html">Home</a>
<a href="tutRequest.html" class="stealth-btn float-right" title="Accesskey Alt(+Shift)+n">Next</a><span class="bar  float-right">|</span><a href="tutFirst.html" class="stealth-btn float-right" title="Accesskey Alt(+Shift)+p">Previous</a>
<div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
<div itemprop="articleBody" class="toBeIndexed">
<div class="document">
<div class="section" id="create-a-custom-application">
<h1>Create a Custom Application</h1>
<p>This example shows the steps involved in
creating a custom application that sends a data stream to the Demoyard
Cloud using the Demoyard Agent gRPC API. For the simple applications, you do not need a configuration file because your stream name is dynamically added to the Demoyard Cloud.</p>
<p>See the example source code: <a class="reference internal" href="#example-source">Example Source</a></p>
<div class="section" id="step-1-create-your-custom-application">
<h2>Step 1. Create Your Custom Application</h2>
<p>Import the following Python modules:</p>
<pre class="code python literal-block">
<span class="keyword namespace">import</span> <span class="name namespace">base64</span>
<span class="keyword namespace">import</span> <span class="name namespace">json</span>
<span class="keyword namespace">import</span> <span class="name namespace">sys</span>
<span class="keyword namespace">import</span> <span class="name namespace">time</span>
<span class="keyword namespace">import</span> <span class="name namespace">grpc</span>
<span class="keyword namespace">import</span> <span class="name namespace">agent</span>
<span class="keyword namespace">import</span> <span class="name namespace">agent_grpc</span>
</pre>
<p>The <tt class="docutils literal">grpc</tt> module is the RPC API framework implemented by the
Demoyard Agent. The <tt class="docutils literal">agent</tt> and <tt class="docutils literal">agent_grpc</tt> modules should be in
your example directory, originally copied from the Demoyard repository.</p>
<p>The example first connects to the Demoyard Agent, which listens for gRPC messages on port 7501.</p>
<pre class="code python literal-block">
<span class="name">pipe</span> <span class="operator">=</span> <span class="name">grpc</span><span class="operator">.</span><span class="name">insecure_pipe</span><span class="punctuation">(</span><span class="literal string double">&quot;localhost:7501&quot;</span><span class="punctuation">)</span>
<span class="name">agent</span> <span class="operator">=</span> <span class="name">agent_grpc</span><span class="operator">.</span><span class="name">Agent</span><span class="punctuation">(</span><span class="name">pipe</span><span class="punctuation">)</span>
</pre>
<p>After you successfully connect, send data to the Demoyard Agent by calling the gRPC API
<tt class="docutils literal">SendData()</tt> function defined in the agent_grpc.py file.</p>
<pre class="code python literal-block">
<span class="name">agent_stub</span><span class="operator">.</span><span class="name">SendData</span><span class="punctuation">(</span><span class="name">write_data</span> <span class="name">points</span><span class="punctuation">())</span>
</pre>
<p>The following functions show the steps to create and write a data point.</p>
<div class="section" id="create-a-datapoint">
<h3>Create a Datapoint</h3>
<p>All data points have the following definition:</p>
<pre class="code json literal-block">
<span class="punctuation">{</span>
   <span class="name tag">&quot;stream&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;&lt;streamName&gt;&quot;</span><span class="punctuation">,</span>
   <span class="name tag">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="error">&lt;time&gt;</span><span class="punctuation">,</span>
   <span class="name tag">&quot;&lt;data_type&gt;&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span> <span class="error">&lt;dataObject&gt;</span> <span class="punctuation">}</span>
<span class="punctuation">}</span>
</pre>
<p>The <tt class="docutils literal">create_data_point()</tt> function populates this structure with:</p>
<ul class="simple">
<li>A stream name.  If the stream is not defined in the config.toml file, the Demoyard Cloud dynamically creates the stream.</li>
<li>A timestamp, in epoch time.</li>
<li>The data, specified as a type-value pair having a <cite>Text</cite> data type and a string value.</li>
</ul>
<p>create then calls <cite>agent.Datapoint()</cite> to create the data point.</p>
<pre class="code python literal-block">
<span class="keyword">def</span> <span class="name function">create_data_point</span><span class="punctuation">(</span><span class="name">point</span><span class="punctuation">):</span>
    <span class="name">timestamp</span> <span class="operator">=</span> <span class="name builtin">int</span><span class="punctuation">(</span><span class="name">time</span><span class="operator">.</span><span class="name">time</span><span class="punctuation">()</span> <span class="operator">*</span> <span class="literal number integer">1000</span><span class="punctuation">)</span>
    <span class="name">text_msg</span> <span class="operator">=</span> <span class="name">agent</span><span class="operator">.</span><span class="name">Text</span><span class="punctuation">()</span>
    <span class="name">text_msg</span><span class="operator">.</span><span class="name">value</span> <span class="operator">=</span> <span class="literal string single">'this is a </span><span class="literal string interpol">%s</span><span class="literal string single"> data point'</span> <span class="operator">%</span> <span class="name">point</span>
    <span class="name">data_point</span> <span class="operator">=</span> <span class="name">agent</span><span class="operator">.</span><span class="name">Datapoint</span><span class="punctuation">(</span>
        <span class="name">stream</span><span class="operator">=</span><span class="literal string double">&quot;testStream_01&quot;</span><span class="punctuation">,</span> <span class="name">text</span><span class="operator">=</span><span class="name">text_msg</span><span class="punctuation">,</span> <span class="name">timestamp</span><span class="operator">=</span><span class="name">timestamp</span><span class="punctuation">)</span>
    <span class="keyword">return</span> <span class="name">data_point</span>
</pre>
</div>
<div class="section" id="write-the-datapoints">
<h3>Write the Datapoints</h3>
<p>The <tt class="docutils literal">write_data points()</tt> function continuously creates data points until you end the program with <tt class="docutils literal"><span class="pre">Ctrl-c</span></tt>. The function pauses 10 seconds between data point transmission.</p>
<pre class="code python literal-block">
<span class="keyword">def</span> <span class="name function">write_data</span> <span class="name">points</span><span class="punctuation">():</span>
    <span class="keyword">while</span> <span class="name">agent_stub</span> <span class="operator word">is</span> <span class="operator word">not</span> <span class="name builtin pseudo">None</span><span class="punctuation">:</span>
        <span class="keyword">yield</span> <span class="name">create_data_point</span><span class="punctuation">(</span><span class="literal string double">&quot;stream&quot;</span><span class="punctuation">)</span>
        <span class="name">time</span><span class="operator">.</span><span class="name">sleep</span><span class="punctuation">(</span><span class="literal number integer">10</span><span class="punctuation">)</span>
</pre>
<p>In the next step, you can run this example and see the results on the Demoyard web application.</p>
</div>
</div>
<div class="section" id="step-2-run-the-example-and-visualize-your-data">
<h2>Step 2. Run the Example and Visualize Your Data</h2>
<p>Run the example using the following command:</p>
<pre class="code bash literal-block">
$ python custom.py
</pre>
<p>The example displays:</p>
<pre class="code literal-block">
Demoyard Agent communication established.
Streaming data points (use Ctrl+c to exit) ...
</pre>
<p>Next, log in to the Demoyard Cloud using your Demoyard credentials. Scroll to the panel labeled <strong>testStream_01</strong>.</p>
<p>In the example, four data points were received by the Demoyard Cloud and you can view the data:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Column</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>VALUE</strong></td>
<td>Shows the data string sent by the example: <tt class="docutils literal">This is a data point</tt>.</td>
</tr>
<tr><td><strong>TIME</strong></td>
<td>Shows the data timestamp, at approximately 10-second intervals.</td>
</tr>
<tr><td><strong>TAGS</strong></td>
<td>This column is empty because a tag is not associated with this stream.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="summary">
<h2>Summary</h2>
<p>This tutorial introduced you to the steps needed to create a simple,
custom application that sends a data stream to the Demoyard Cloud.</p>
<p>Try associating a tag with the data by defining the tag and stream and the <cite>/home/demoyard/config.toml</cite> file:</p>
<pre class="code literal-block">
[demoyard]
agent-ip = &quot;localhost&quot;
agent-port-grpc = &quot;7501&quot;
agent-port-http = &quot;7502&quot;
[tags]
site = &quot;test_lab&quot;
[[streams]]
name = &quot;testStream_01&quot;
</pre>
<p>Run the example again and view the results in the Demoyard web application.  Make sure to restart the Demoyard Agent before running the example.</p>
</div>
<div class="section" id="example-source">
<h2>Example Source</h2>
<pre class="code python literal-block">
<span class="comment hashbang">#!/usr/bin/env python</span>
<span class="keyword namespace">import</span> <span class="name namespace">base64</span>
<span class="keyword namespace">import</span> <span class="name namespace">json</span>
<span class="keyword namespace">import</span> <span class="name namespace">sys</span>
<span class="keyword namespace">import</span> <span class="name namespace">time</span>
<span class="keyword namespace">import</span> <span class="name namespace">grpc</span>
<span class="keyword namespace">import</span> <span class="name namespace">agent</span>
<span class="keyword namespace">import</span> <span class="name namespace">agent_grpc</span>
<span class="comment single">#### gRPC Implementation ####</span>
<span class="keyword">def</span> <span class="name function">create_data_point</span><span class="punctuation">(</span><span class="name">point</span><span class="punctuation">):</span>
    <span class="name">timestamp</span> <span class="operator">=</span> <span class="name builtin">int</span><span class="punctuation">(</span><span class="name">time</span><span class="operator">.</span><span class="name">time</span><span class="punctuation">()</span> <span class="operator">*</span> <span class="literal number integer">1000</span><span class="punctuation">)</span>
    <span class="name">text_msg</span> <span class="operator">=</span> <span class="name">agent</span><span class="operator">.</span><span class="name">Text</span><span class="punctuation">()</span>
    <span class="name">text_msg</span><span class="operator">.</span><span class="name">value</span> <span class="operator">=</span> <span class="literal string single">'this is a </span><span class="literal string interpol">%s</span><span class="literal string single"> data point'</span> <span class="operator">%</span> <span class="name">point</span>
    <span class="name">data_point</span> <span class="operator">=</span> <span class="name">agent</span><span class="operator">.</span><span class="name">Datapoint</span><span class="punctuation">(</span>
        <span class="name">stream</span><span class="operator">=</span><span class="literal string double">&quot;testStream_01&quot;</span><span class="punctuation">,</span> <span class="name">text</span><span class="operator">=</span><span class="name">text_msg</span><span class="punctuation">,</span> <span class="name">timestamp</span><span class="operator">=</span><span class="name">timestamp</span><span class="punctuation">)</span>
    <span class="keyword">return</span> <span class="name">data_point</span>
<span class="keyword">def</span> <span class="name function">write_data</span> <span class="name">points</span><span class="punctuation">():</span>
    <span class="keyword">while</span> <span class="name">agent_stub</span> <span class="operator word">is</span> <span class="operator word">not</span> <span class="name builtin pseudo">None</span><span class="punctuation">:</span>
        <span class="keyword">yield</span> <span class="name">create_data_point</span><span class="punctuation">(</span><span class="literal string double">&quot;stream&quot;</span><span class="punctuation">)</span>
        <span class="name">time</span><span class="operator">.</span><span class="name">sleep</span><span class="punctuation">(</span><span class="literal number integer">10</span><span class="punctuation">)</span>
<span class="comment single">#### Entry point ####</span>
<span class="name">pipe</span> <span class="operator">=</span> <span class="name">grpc</span><span class="operator">.</span><span class="name">insecure_pipe</span><span class="punctuation">(</span><span class="literal string double">&quot;localhost:7501&quot;</span><span class="punctuation">)</span>
<span class="name">agent_stub</span> <span class="operator">=</span> <span class="name">agent_grpc</span><span class="operator">.</span><span class="name">AgentStub</span><span class="punctuation">(</span><span class="name">pipe</span><span class="punctuation">)</span>
<span class="keyword">print</span><span class="punctuation">(</span><span class="literal string single">'</span><span class="literal string escape">\n</span><span class="literal string single">Demoyard Agent communication established.'</span><span class="punctuation">)</span>
<span class="comment single">#### Datapoint Streaming ####</span>
<span class="keyword">print</span><span class="punctuation">(</span><span class="literal string single">'Streaming data points (use Ctrl+c to exit) ...'</span><span class="punctuation">)</span>
<span class="name">agent_stub</span><span class="operator">.</span><span class="name">SendData</span><span class="punctuation">(</span><span class="name">write_data</span> <span class="name">points</span><span class="punctuation">())</span>
</pre>
</div>
</div>
</div>

</div><!-- /.toBeIndexed -->
</div>
<footer>
<div class="rst-footer-nav" role="navigation" aria-label="footer navigation">

<a href="tutFirst.html" title="Accesskey Alt(+Shift)+p" accesskey="p">Previous</a><span class="bar">|</span><a href="tutRequest.html" title="Accesskey Alt(+Shift)+n" accesskey="n">Next</a>
</div></footer>
</div>
</div>
</section>
</div>


<script type="text/javascript">
var DOCUMENTATION_OPTIONS = {
URL_ROOT:'./',
VERSION:'',
COLLAPSE_INDEX:false,
FILE_SUFFIX:'.html',
HAS_SOURCE:  true
};
</script>
<script type="text/javascript" src="static/js/jquery.min.js"></script>
<script type="text/javascript" src="static/js/underscore.js"></script>
<script type="text/javascript" src="static/js/doctools.js"></script>
<script type="text/javascript" src="static/js/language_data.js"></script>
<script type="text/javascript" src="static/js/searchtools.js"></script>
<script type="text/javascript" src="static/js/jquery-ui.min.js"></script>
<script type="text/javascript" src="static/js/theme.js"></script>
<script type="text/javascript">
jQuery(function () {
SphinxRtdTheme.StickyNav.enable();
});
</script>
<script type="text/javascript" id="idPiwikScriptPlaceholder"></script>
<header>
<div class="header__container">
<a href="index.html"><img class="raw_img" height="64" src="img/bannerLogo.png" alt="Documentation" /></a>

<ul class="header__links"><li><a href="https://github.community/">Community</a></li><li><a href="https://github.com/ghartsel/DoreStaticSiteGenerator/tree/master/demo">GitHub</a></li><li><a href="https://www.gh.works/">About</a></li></ul>
</div>
</header>
</body>
